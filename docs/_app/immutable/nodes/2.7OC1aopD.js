import{s as U,n as M,f as he,h as _e,i as te,j as me,k as re}from"../chunks/scheduler.VjnKrHbr.js";import{S as O,i as R,g as w,h as I,y as ge,k as m,z as Q,a as D,A as ve,f as _,j as $,s as z,c as V,x as C,d as S,p as de,t as E,b as fe,m as q,n as B,o as G,r as N,u as F,v as H,w as J,B as ue,C as be}from"../chunks/index.dnjB_LFz.js";import{w as y,d as Ce}from"../chunks/index.Hs_PKAGm.js";function W(n){return n?.length!==void 0?n:Array.from(n)}const pe=!0,we=!0,Ie=!0,Qe=Object.freeze(Object.defineProperty({__proto__:null,csr:Ie,prerender:pe,ssr:we},Symbol.toStringTag,{value:"Module"}));function $e(n){let e,s="+",t,r;return{c(){e=w("div"),e.textContent=s,this.h()},l(a){e=I(a,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-3ez51d"&&(e.textContent=s),this.h()},h(){m(e,"class","Add svelte-1vmbkx1"),Q(e,"Add-disabled",n[0])},m(a,d){D(a,e,d),t||(r=ve(e,"click",n[1]),t=!0)},p(a,[d]){d&1&&Q(e,"Add-disabled",a[0])},i:M,o:M,d(a){a&&_(e),t=!1,r()}}}function Se(n,e,s){let{disabled:t=!1}=e;function r(a){he.call(this,n,a)}return n.$$set=a=>{"disabled"in a&&s(0,t=a.disabled)},[t,r]}class ke extends O{constructor(e){super(),R(this,e,Se,$e,U,{disabled:0})}}function De(n){const e=y(!0);let s;const t=()=>{e.set(!1),clearTimeout(s),s=setTimeout(()=>{e.set(!0)},n)};return t(),{isInactive:e,reset:t}}const Ee=()=>Math.random().toString().slice(1).split("").map(n=>String.fromCharCode(Number(n)+97)).join(""),ze=1e3,Ve=n=>{const e=y({}),s=De(30*ze);let t=y(!1);function r(o,f){e.update(c=>(c[o]={...c[o],...f},c))}function a(o,f){e.update(c=>(c[o]=c[o]||{},c[o].imgSrc=f,c))}function d(o,f){console.error(f),e.update(c=>(c[o]={...c[o],error:f},c))}const l=o=>n.getRandomCoffee().then(f=>r(o,f)),h=o=>n.getCoffeePicture().then(f=>a(o,f)),i=()=>{if(_e(t))return;t.set(!0);const o=Ee();Promise.all([l(o).catch(f=>{d(o,f)}),h(o).catch(f=>{d(o,f)})]).then(()=>{t.set(!1)})};return s.isInactive.subscribe(o=>{o&&(s.reset(),i())}),{cards:Ce(e,o=>Object.values(o).filter(f=>!!f.id||!!f.error)),isLoading:t,init(){i()},onLoadMoreClick(){s.reset(),i()}}},Le=()=>({getRandomCoffee:()=>fetch("https://random-data-api.com/api/coffee/random_coffee").then(n=>n.json()),getCoffeePicture:()=>fetch("https://loremflickr.com/500/500/coffee_bean",{redirect:"follow"}).then(n=>n.blob()).then(n=>window.URL.createObjectURL(n))}),se=Ve(Le());function Ae(n){let e;return{c(){e=w("div"),this.h()},l(s){e=I(s,"DIV",{class:!0}),$(e).forEach(_),this.h()},h(){m(e,"class","Loader svelte-v5dvdc"),e.hidden=n[0]},m(s,t){D(s,e,t)},p(s,[t]){t&1&&(e.hidden=s[0])},i:M,o:M,d(s){s&&_(e)}}}function Me(n,e,s){let{hidden:t=!1}=e;return n.$$set=r=>{"hidden"in r&&s(0,t=r.hidden)},[t]}class je extends O{constructor(e){super(),R(this,e,Me,Ae,U,{hidden:0})}}function ne(n,e,s){const t=n.slice();return t[6]=e[s],t}function ae(n){let e=n[5].message+"",s;return{c(){s=q(e)},l(t){s=B(t,e)},m(t,r){D(t,s,r)},p(t,r){r&32&&e!==(e=t[5].message+"")&&G(s,e)},d(t){t&&_(s)}}}function ie(n){let e,s,t,r,a,d,l,h,i,o,f,c,L,X,j,K,Y,A,k;s=new je({props:{hidden:!!n[4]}});let P=W(n[3]),v=[];for(let u=0;u<P.length;u+=1)v[u]=le(ne(n,P,u));return{c(){e=w("div"),N(s.$$.fragment),t=z(),r=w("img"),l=z(),h=w("div"),i=w("div"),o=q(n[0]),f=z(),c=w("div"),L=q(n[1]),X=z(),j=w("div"),K=q(n[2]),Y=z(),A=w("div");for(let u=0;u<v.length;u+=1)v[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var g=$(e);F(s.$$.fragment,g),t=V(g),r=I(g,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),g.forEach(_),l=V(u),h=I(u,"DIV",{class:!0});var b=$(h);i=I(b,"DIV",{class:!0});var p=$(i);o=B(p,n[0]),p.forEach(_),f=V(b),c=I(b,"DIV",{class:!0});var T=$(c);L=B(T,n[1]),T.forEach(_),X=V(b),j=I(b,"DIV",{class:!0});var x=$(j);K=B(x,n[2]),x.forEach(_),Y=V(b),A=I(b,"DIV",{class:!0});var ee=$(A);for(let Z=0;Z<v.length;Z+=1)v[Z].l(ee);ee.forEach(_),b.forEach(_),this.h()},h(){m(r,"class","Card__img svelte-wd9r8z"),te(r.src,a=n[4])||m(r,"src",a),m(r,"alt",n[1]),r.hidden=d=!n[4],m(r,"width",250),m(r,"height",250),m(e,"class","Card__banner svelte-wd9r8z"),m(i,"class","Card__tooltip svelte-wd9r8z"),m(c,"class","Card__header svelte-wd9r8z"),m(j,"class","Card__subheader svelte-wd9r8z"),m(A,"class","Card__tags no-scrollbar svelte-wd9r8z"),m(h,"class","Card__content svelte-wd9r8z")},m(u,g){D(u,e,g),H(s,e,null),C(e,t),C(e,r),D(u,l,g),D(u,h,g),C(h,i),C(i,o),C(h,f),C(h,c),C(c,L),C(h,X),C(h,j),C(j,K),C(h,Y),C(h,A);for(let b=0;b<v.length;b+=1)v[b]&&v[b].m(A,null);k=!0},p(u,g){const b={};if(g&16&&(b.hidden=!!u[4]),s.$set(b),(!k||g&16&&!te(r.src,a=u[4]))&&m(r,"src",a),(!k||g&2)&&m(r,"alt",u[1]),(!k||g&16&&d!==(d=!u[4]))&&(r.hidden=d),(!k||g&1)&&G(o,u[0]),(!k||g&2)&&G(L,u[1]),(!k||g&4)&&G(K,u[2]),g&8){P=W(u[3]);let p;for(p=0;p<P.length;p+=1){const T=ne(u,P,p);v[p]?v[p].p(T,g):(v[p]=le(T),v[p].c(),v[p].m(A,null))}for(;p<v.length;p+=1)v[p].d(1);v.length=P.length}},i(u){k||(S(s.$$.fragment,u),k=!0)},o(u){E(s.$$.fragment,u),k=!1},d(u){u&&(_(e),_(l),_(h)),J(s),ue(v,u)}}}function le(n){let e,s=n[6]+"",t;return{c(){e=w("div"),t=q(s),this.h()},l(r){e=I(r,"DIV",{class:!0});var a=$(e);t=B(a,s),a.forEach(_),this.h()},h(){m(e,"class","Card__tag svelte-wd9r8z")},m(r,a){D(r,e,a),C(e,t)},p(r,a){a&8&&s!==(s=r[6]+"")&&G(t,s)},d(r){r&&_(e)}}}function Pe(n){let e,s,t,r=!!n[5]&&ae(n),a=!n[5]&&ie(n);return{c(){e=w("div"),r&&r.c(),s=z(),a&&a.c(),this.h()},l(d){e=I(d,"DIV",{class:!0});var l=$(e);r&&r.l(l),s=V(l),a&&a.l(l),l.forEach(_),this.h()},h(){m(e,"class","Card svelte-wd9r8z"),Q(e,"Card-error",!!n[5])},m(d,l){D(d,e,l),r&&r.m(e,null),C(e,s),a&&a.m(e,null),t=!0},p(d,[l]){d[5]?r?r.p(d,l):(r=ae(d),r.c(),r.m(e,s)):r&&(r.d(1),r=null),d[5]?a&&(de(),E(a,1,1,()=>{a=null}),fe()):a?(a.p(d,l),l&32&&S(a,1)):(a=ie(d),a.c(),S(a,1),a.m(e,null)),(!t||l&32)&&Q(e,"Card-error",!!d[5])},i(d){t||(S(a),t=!0)},o(d){E(a),t=!1},d(d){d&&_(e),r&&r.d(),a&&a.d()}}}function Ue(n,e,s){let{tooltip:t}=e,{header:r}=e,{subheader:a}=e,{tags:d=[]}=e,{imgSrc:l=""}=e,{error:h=void 0}=e;return n.$$set=i=>{"tooltip"in i&&s(0,t=i.tooltip),"header"in i&&s(1,r=i.header),"subheader"in i&&s(2,a=i.subheader),"tags"in i&&s(3,d=i.tags),"imgSrc"in i&&s(4,l=i.imgSrc),"error"in i&&s(5,h=i.error)},[t,r,a,d,l,h]}class Oe extends O{constructor(e){super(),R(this,e,Ue,Pe,U,{tooltip:0,header:1,subheader:2,tags:3,imgSrc:4,error:5})}}function Re(n){let e,s;return e=new Oe({props:{header:n[0].blend_name,imgSrc:n[0].imgSrc,subheader:n[0].variety,tooltip:n[0].origin,error:n[0].error,tags:n[0].notes?.split(",")}}),{c(){N(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){H(e,t,r),s=!0},p(t,[r]){const a={};r&1&&(a.header=t[0].blend_name),r&1&&(a.imgSrc=t[0].imgSrc),r&1&&(a.subheader=t[0].variety),r&1&&(a.tooltip=t[0].origin),r&1&&(a.error=t[0].error),r&1&&(a.tags=t[0].notes?.split(",")),e.$set(a)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Te(n,e,s){let{data:t}=e;return n.$$set=r=>{"data"in r&&s(0,t=r.data)},[t]}class qe extends O{constructor(e){super(),R(this,e,Te,Re,U,{data:0})}}function oe(n,e,s){const t=n.slice();return t[5]=e[s],t}function ce(n){let e,s;return e=new qe({props:{data:n[5]}}),{c(){N(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){H(e,t,r),s=!0},p(t,r){const a={};r&8&&(a.data=t[5]),e.$set(a)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Be(n){let e,s,t,r,a,d=W(n[3]),l=[];for(let i=0;i<d.length;i+=1)l[i]=ce(oe(n,d,i));const h=i=>E(l[i],1,1,()=>{l[i]=null});return r=new ke({props:{disabled:n[4]}}),r.$on("click",function(){me(n[1])&&n[1].apply(this,arguments)}),{c(){e=w("div"),s=w("div");for(let i=0;i<l.length;i+=1)l[i].c();t=z(),N(r.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=$(e);s=I(o,"DIV",{class:!0});var f=$(s);for(let c=0;c<l.length;c+=1)l[c].l(f);t=V(f),F(r.$$.fragment,f),f.forEach(_),o.forEach(_),this.h()},h(){m(s,"class","Main__content svelte-vfdaa4"),m(e,"class","Main svelte-vfdaa4")},m(i,o){D(i,e,o),C(e,s);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(s,null);C(s,t),H(r,s,null),a=!0},p(i,[o]){if(n=i,o&8){d=W(n[3]);let c;for(c=0;c<d.length;c+=1){const L=oe(n,d,c);l[c]?(l[c].p(L,o),S(l[c],1)):(l[c]=ce(L),l[c].c(),S(l[c],1),l[c].m(s,t))}for(de(),c=d.length;c<l.length;c+=1)h(c);fe()}const f={};o&16&&(f.disabled=n[4]),r.$set(f)},i(i){if(!a){for(let o=0;o<d.length;o+=1)S(l[o]);S(r.$$.fragment,i),a=!0}},o(i){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)E(l[o]);E(r.$$.fragment,i),a=!1},d(i){i&&_(e),ue(l,i),J(r)}}}function Ge(n,e,s){let t,r,a,d,l=M,h=()=>(l(),l=re(t,c=>s(3,d=c)),t),i,o=M,f=()=>(o(),o=re(a,c=>s(4,i=c)),a);return n.$$.on_destroy.push(()=>l()),n.$$.on_destroy.push(()=>o()),se.init(),h(s(2,{cards:t,onLoadMoreClick:r,isLoading:a}=se,t,s(1,r),f(s(0,a)))),[a,r,t,d,i]}class Ne extends O{constructor(e){super(),R(this,e,Ge,Be,U,{})}}function Fe(n){let e,s,t;return s=new Ne({}),{c(){e=z(),N(s.$$.fragment),this.h()},l(r){be("svelte-14ga93v",document.head).forEach(_),e=V(r),F(s.$$.fragment,r),this.h()},h(){document.title="Test task"},m(r,a){D(r,e,a),H(s,r,a),t=!0},p:M,i(r){t||(S(s.$$.fragment,r),t=!0)},o(r){E(s.$$.fragment,r),t=!1},d(r){r&&_(e),J(s,r)}}}class We extends O{constructor(e){super(),R(this,e,null,Fe,U,{})}}export{We as component,Qe as universal};
